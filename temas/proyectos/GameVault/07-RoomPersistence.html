<!DOCTYPE html><html lang="es" class="no-js"><head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://jssdocente.github.io/pmdm2526d/temas/proyectos/GameVault/07-RoomPersistence.html">
      
      
        <link rel="prev" href="06-DetailScreen.html">
      
      
        <link rel="next" href="08-LibraryAndDetailAdvanced.html">
      
      
        
      
      
      <link rel="icon" href="../../../imagenes/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>7. Persistencia con Room - 2¬∫ DAM - Programaci√≥n Multimedia y Desarrollo m√≥vil - Curso 25/26</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      

  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M17%2013h-4v4h-2v-4H7v-2h4V7h2v4h4m-5-9A10%2010%200%200%200%202%2012a10%2010%200%200%200%2010%2010%2010%2010%200%200%200%2010-10A10%2010%200%200%200%2012%202%22/%3E%3C/svg%3E');}</style>


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../extra/css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="Teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#7-persistencia-local-con-room" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../../../index.html" title="2¬∫ DAM - Programaci√≥n Multimedia y Desarrollo m√≥vil - Curso 25/26" class="md-header__button md-logo" aria-label="2¬∫ DAM - Programaci√≥n Multimedia y Desarrollo m√≥vil - Curso 25/26" data-md-component="logo">
      
  <img src="../../../imagenes/logofp.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            2¬∫ DAM - Programaci√≥n Multimedia y Desarrollo m√≥vil - Curso 25/26
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              7. Persistencia con Room
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="Teal" aria-label="Cambiar a modo noche" type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Cambiar a modo noche" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"></path></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="light-blue" data-md-color-accent="Teal" aria-label="Cambiar a modo d√≠a" type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Cambiar a modo d√≠a" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"></path></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="B√∫squeda" placeholder="B√∫squeda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando b√∫squeda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegaci√≥n" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../index.html" title="2¬∫ DAM - Programaci√≥n Multimedia y Desarrollo m√≥vil - Curso 25/26" class="md-nav__button md-logo" aria-label="2¬∫ DAM - Programaci√≥n Multimedia y Desarrollo m√≥vil - Curso 25/26" data-md-component="logo">
      
  <img src="../../../imagenes/logofp.png" alt="logo">

    </a>
    2¬∫ DAM - Programaci√≥n Multimedia y Desarrollo m√≥vil - Curso 25/26
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Inicio
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2">
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Android
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Android
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Inicio
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2">
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    El lenguaje kotlin
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    El lenguaje kotlin
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/00-kotlin/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducci√≥n
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/00-kotlin/11-variables-tipos-datos.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Variables
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/00-kotlin/12-expresiones-vs-sentencias.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Expresiones vs Sentencias
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/00-kotlin/12.1-when.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    When
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/00-kotlin/13-funciones-lambdas.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Funciones y lambdas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/00-kotlin/14-null-safety.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Null safety
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_7">
        
          
          <label class="md-nav__link" for="__nav_2_2_7" id="__nav_2_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Colecciones
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Colecciones
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/00-kotlin/41-arrays.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Arrays
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/00-kotlin/42-listas.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Listas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/00-kotlin/43-maps.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Maps
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/00-kotlin/44-sets.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sets
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/00-kotlin/21-poo.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    POO
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/00-kotlin/22-objetos-anonimos.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Objetos an√≥nimos
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/00-kotlin/23-data-classes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data classes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/00-kotlin/24-enum-classes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Enum classes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/00-kotlin/25-genericos.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Gen√©ricos
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/00-kotlin/26-sealed-classes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Clases selladas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/00-kotlin/31-scope-functions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Scope functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/00-kotlin/52-corrutinas-sencillo.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Corrutinas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3">
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Herramientas Proyecto Android
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Herramientas Proyecto Android
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/00-tools/01-gradle-agp-estructura.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Gradle
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/00-tools/02-build-gradle.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Build-gradle
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/00-tools/03-android-manifest.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fichero Manifest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4">
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Jetpack Compose
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Jetpack Compose
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/00-compose/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducci√≥n
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/00-compose/21-composable-functions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Funciones componibles
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/00-compose/22-state-management.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Gesti√≥n del estado
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/00-compose/23-listas-cuadriculas.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Listas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/00-compose/24-navegacion-rutas.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Navegaci√≥n Rutas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/00-compose/25-material-design.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Material Design
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-android/00-compose/99-glosario-android.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Glosario
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UT1 - Visi√≥n General y Entorno de desarrollo
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4">
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    UT2 - Programaci√≥n de aplicaciones de m√≥viles con Android
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    UT2 - Programaci√≥n de aplicaciones de m√≥viles con Android
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Inicio
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02/2.1-primeros-pasos.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2.1. Primeros pasos
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02/2.2-ciclo-vida-app.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2.2. Ciclo de Vida
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02/2.3-primera-app.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2.3. Primera aplicaci√≥n
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02/2.4-gestion-estado.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2.4. Gesti√≥n del estado
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02/2.5-mejorando-codigo.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2.5. Mejorando el c√≥digo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02/2.6-mostrar-listas.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2.6. Manejo de listas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5">
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    UT3 - Interfaz de Usuario
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    UT3 - Interfaz de Usuario
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../03/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Inicio
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../03/3.1-intro.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3.1. Introducci√≥n
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../03/3.2-temas.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3.2. Temas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4">
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3.3. Arquitectura
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    3.3. Arquitectura
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../03/3.3-arquitectura.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3.3.1. Introducci√≥n
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../03/3.3.2-arquitectura.capa-ui" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3.3.2. Capa de UI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../03/3.3.3-arquitectura.capa-datos.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3.3.3. Capas Datos/Dominio
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4_4">
        
          
          <label class="md-nav__link" for="__nav_5_4_4" id="__nav_5_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3.3.4. Clean Architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    3.3.4. Clean Architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../03/3.3.3.2-CapaDominio-es.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Capa de Dominio
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../03/3.3.3.3-CapaDatos-es.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Capa de Datos
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6">
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    UT4 - Persistencia
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    UT4 - Persistencia
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../04/4.0-persistencia.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducci√≥n
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../04/4.1-room.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    4.1. Room
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../04/4.2-conexion-internet.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    4.2. Conexi√≥n a Internet
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Proyecto Gu√≠a
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Proyecto Gu√≠a
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introducci√≥n
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="01-configuracion-proyecto.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1. Configuraci√≥n proyecto
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="02-LoginScreen.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2. Pantalla Login
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="03-Preferences.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3. Preferencias
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="04-Register-logout.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    4. Registro y logout
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="05-HomeScreen.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    5. HomeScreen
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="06-DetailScreen.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    6. Detalles de un juego
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    7. Persistencia con Room
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="07-RoomPersistence.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    7. Persistencia con Room
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#indice" class="md-nav__link">
    <span class="md-ellipsis">
      
        üìñ √çndice
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nuevas-funcionalidades" class="md-nav__link">
    <span class="md-ellipsis">
      
        üéØ Nuevas Funcionalidades
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introducci√≥n-a-room" class="md-nav__link">
    <span class="md-ellipsis">
      
        üèóÔ∏è Introducci√≥n a Room y Configuraci√≥n
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üèóÔ∏è Introducci√≥n a Room y Configuraci√≥n">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#por-que-room" class="md-nav__link">
    <span class="md-ellipsis">
      
        ¬øPor qu√© Room?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuracion-de-dependencias" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuraci√≥n de Dependencias
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#entitys-y-daos" class="md-nav__link">
    <span class="md-ellipsis">
      
        üèóÔ∏è El Coraz√≥n de Room: Entitys y DAOs
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üèóÔ∏è El Coraz√≥n de Room: Entitys y DAOs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arquitectura-de-room" class="md-nav__link">
    <span class="md-ellipsis">
      
        Arquitectura de Room
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-entities-entidades" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Entities (Entidades)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-daos-data-access-objects" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. DAOs (Data Access Objects)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-la-base-de-datos-appdatabase" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. La Base de Datos (AppDatabase)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diagrama-de-relaciones" class="md-nav__link">
    <span class="md-ellipsis">
      
        Diagrama de Relaciones
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#relaciones-entidades" class="md-nav__link">
    <span class="md-ellipsis">
      
        üîó Relacionando Datos: Foreign Keys
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üîó Relacionando Datos: Foreign Keys">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#que-es-una-clave-foranea" class="md-nav__link">
    <span class="md-ellipsis">
      
        ¬øQu√© es una Clave For√°nea?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#como-implementar-una-relacion-en-room" class="md-nav__link">
    <span class="md-ellipsis">
      
        C√≥mo implementar una relaci√≥n en Room
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tipos-de-relaciones-comunes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tipos de Relaciones comunes:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integridad-referencial-ondelete-cascade" class="md-nav__link">
    <span class="md-ellipsis">
      
        Integridad Referencial: onDelete = CASCADE
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mapeo-de-datos" class="md-nav__link">
    <span class="md-ellipsis">
      
        üõ°Ô∏è Mapeo de Datos y Conversores
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üõ°Ô∏è Mapeo de Datos y Conversores">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-typeconverters-los-traductores-de-sqlite" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. TypeConverters: Los traductores de SQLite
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-mappers-protegiendo-el-dominio" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Mappers: Protegiendo el Dominio
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#typeconverters-vs-mappers" class="md-nav__link">
    <span class="md-ellipsis">
      
        TypeConverters vs Mappers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diagrama-de-flujo-de-datos" class="md-nav__link">
    <span class="md-ellipsis">
      
        Diagrama de Flujo de Datos
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arquitectura-h√≠brida" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚öôÔ∏è Arquitectura H√≠brida y Reactividad
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="‚öôÔ∏è Arquitectura H√≠brida y Reactividad">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#integracion-en-el-viewmodel" class="md-nav__link">
    <span class="md-ellipsis">
      
        Integraci√≥n en el ViewModel
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#el-poder-de-flow-en-room" class="md-nav__link">
    <span class="md-ellipsis">
      
        El poder de Flow en Room
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#motor-app" class="md-nav__link">
    <span class="md-ellipsis">
      
        üöÄ El Motor de la App: MyGameStoreApp
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üöÄ El Motor de la App: MyGameStoreApp">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#por-que-es-importante" class="md-nav__link">
    <span class="md-ellipsis">
      
        ¬øPor qu√© es importante?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      
        üí° Conclusi√≥n
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="08-LibraryAndDetailAdvanced.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    8. Biblioteca y detalles avanzados
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="09-DI-Koin.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    9. Inyecci√≥n de dependencias con Koin
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="10-Auth-firebase.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    10. Autenticaci√≥n con Firebase
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="11-Auth-google.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    11. Autenticaci√≥n con Google
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#indice" class="md-nav__link">
    <span class="md-ellipsis">
      
        üìñ √çndice
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nuevas-funcionalidades" class="md-nav__link">
    <span class="md-ellipsis">
      
        üéØ Nuevas Funcionalidades
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introducci√≥n-a-room" class="md-nav__link">
    <span class="md-ellipsis">
      
        üèóÔ∏è Introducci√≥n a Room y Configuraci√≥n
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üèóÔ∏è Introducci√≥n a Room y Configuraci√≥n">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#por-que-room" class="md-nav__link">
    <span class="md-ellipsis">
      
        ¬øPor qu√© Room?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuracion-de-dependencias" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuraci√≥n de Dependencias
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#entitys-y-daos" class="md-nav__link">
    <span class="md-ellipsis">
      
        üèóÔ∏è El Coraz√≥n de Room: Entitys y DAOs
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üèóÔ∏è El Coraz√≥n de Room: Entitys y DAOs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arquitectura-de-room" class="md-nav__link">
    <span class="md-ellipsis">
      
        Arquitectura de Room
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-entities-entidades" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Entities (Entidades)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-daos-data-access-objects" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. DAOs (Data Access Objects)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-la-base-de-datos-appdatabase" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. La Base de Datos (AppDatabase)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diagrama-de-relaciones" class="md-nav__link">
    <span class="md-ellipsis">
      
        Diagrama de Relaciones
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#relaciones-entidades" class="md-nav__link">
    <span class="md-ellipsis">
      
        üîó Relacionando Datos: Foreign Keys
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üîó Relacionando Datos: Foreign Keys">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#que-es-una-clave-foranea" class="md-nav__link">
    <span class="md-ellipsis">
      
        ¬øQu√© es una Clave For√°nea?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#como-implementar-una-relacion-en-room" class="md-nav__link">
    <span class="md-ellipsis">
      
        C√≥mo implementar una relaci√≥n en Room
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tipos-de-relaciones-comunes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tipos de Relaciones comunes:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integridad-referencial-ondelete-cascade" class="md-nav__link">
    <span class="md-ellipsis">
      
        Integridad Referencial: onDelete = CASCADE
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mapeo-de-datos" class="md-nav__link">
    <span class="md-ellipsis">
      
        üõ°Ô∏è Mapeo de Datos y Conversores
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üõ°Ô∏è Mapeo de Datos y Conversores">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-typeconverters-los-traductores-de-sqlite" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. TypeConverters: Los traductores de SQLite
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-mappers-protegiendo-el-dominio" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Mappers: Protegiendo el Dominio
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#typeconverters-vs-mappers" class="md-nav__link">
    <span class="md-ellipsis">
      
        TypeConverters vs Mappers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diagrama-de-flujo-de-datos" class="md-nav__link">
    <span class="md-ellipsis">
      
        Diagrama de Flujo de Datos
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arquitectura-h√≠brida" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚öôÔ∏è Arquitectura H√≠brida y Reactividad
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="‚öôÔ∏è Arquitectura H√≠brida y Reactividad">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#integracion-en-el-viewmodel" class="md-nav__link">
    <span class="md-ellipsis">
      
        Integraci√≥n en el ViewModel
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#el-poder-de-flow-en-room" class="md-nav__link">
    <span class="md-ellipsis">
      
        El poder de Flow en Room
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#motor-app" class="md-nav__link">
    <span class="md-ellipsis">
      
        üöÄ El Motor de la App: MyGameStoreApp
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üöÄ El Motor de la App: MyGameStoreApp">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#por-que-es-importante" class="md-nav__link">
    <span class="md-ellipsis">
      
        ¬øPor qu√© es importante?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      
        üí° Conclusi√≥n
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                



  


  <nav class="md-path" aria-label="Navegaci√≥n">
    <ol class="md-path__list">
      
        
  
  
    <li class="md-path__item">
      <a href="../../../index.html" class="md-path__link">
        
  <span class="md-ellipsis">
    Inicio
  </span>

      </a>
    </li>
  

      
      
        
  
  
    
    
      <li class="md-path__item">
        <a href="index.html" class="md-path__link">
          
  <span class="md-ellipsis">
    Proyecto Gu√≠a
  </span>

        </a>
      </li>
    
  

      
    </ol>
  </nav>

              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="7-persistencia-local-con-room"><strong>7. Persistencia Local con Room</strong><a class="headerlink" href="#7-persistencia-local-con-room" title="Permanent link">¬∂</a></h1>
<p>En esta 7¬™ entrega, transformaremos nuestra aplicaci√≥n de una experiencia vol√°til a una <strong>persistente</strong>. Hasta ahora, si cerr√°bamos la app, perd√≠amos cualquier cambio (como los favoritos o el historial). Implementaremos <strong>Room</strong>, la biblioteca oficial de Android para el manejo de bases de datos, permitiendo que el usuario guarde su biblioteca personal, notas y preferencias de forma permanente en su dispositivo.</p>
<hr>
<h2 id="indice">üìñ √çndice<a class="headerlink" href="#indice" title="Permanent link">¬∂</a></h2>
<ol>
<li><a href="#nuevas-funcionalidades">Nuevas Funcionalidades</a></li>
<li><a href="#introducci√≥n-a-room">Introducci√≥n a Room y Configuraci√≥n</a></li>
<li><a href="#entitys-y-daos">El Coraz√≥n de Room: Entitys y DAOs</a></li>
<li><a href="#relaciones-entidades">Relacionando Datos: Foreign Keys</a></li>
<li><a href="#mapeo-de-datos">Mapeo de Datos y Conversores</a></li>
<li><a href="#arquitectura-h√≠brida">Arquitectura H√≠brida y Reactividad</a></li>
<li><a href="#motor-app">El Motor de la App: MyGameStoreApp</a></li>
</ol>
<hr>
<h2 id="nuevas-funcionalidades">üéØ Nuevas Funcionalidades<a class="headerlink" href="#nuevas-funcionalidades" title="Permanent link">¬∂</a></h2>
<p>Con la integraci√≥n de Room, nuestra aplicaci√≥n deja de ser una "demo" est√°tica para convertirse en una herramienta personalizada. Estas son las capacidades que el alumno aprender√° a implementar:</p>
<ul>
<li><strong>Biblioteca Personal</strong>: Permite al usuario gestionar su colecci√≥n propia de videojuegos de forma persistente. A trav√©s de una tabla dedicada, podremos registrar qu√© juegos posee el usuario o cu√°les tiene en su lista de deseos, permitiendo que esta informaci√≥n sobreviva incluso si el dispositivo se reinicia o la aplicaci√≥n se cierra por completo.</li>
<li><strong>Sistema de Favoritos</strong>: Implementaremos una funcionalidad de "coraz√≥n" que guarda el estado de preferencia de un juego directamente en la base de datos local. Al contrario que en las versiones anteriores donde el estado se perd√≠a, ahora utilizaremos consultas SQL para marcar y desmarcar juegos, asegurando que el usuario encuentre siempre sus t√≠tulos preferidos al volver a la app.</li>
<li><strong>Historial Din√°mico</strong>: Crearemos un registro autom√°tico que almacena las b√∫squedas recientes del usuario y los √∫ltimos juegos visitados. Esta funcionalidad no solo mejora la experiencia de usuario (UX) al permitir accesos r√°pidos, sino que tambi√©n sirve para practicar la gesti√≥n de inserciones con l√≠mites de registros (por ejemplo, guardar solo los √∫ltimos 5 elementos).</li>
<li><strong>Notas y Seguimiento</strong>: A√±adiremos la capacidad de que el usuario guarde anotaciones personales y estados de progreso para cada juego (<em>Pendiente, Jugando, Completado, Abandonado</em>). Esto permite trabajar con relaciones de datos m√°s complejas y actualizaciones de registros existentes, transformando la app en un verdadero diario de juego personal.</li>
</ul>
<hr>
<h2 id="introducci√≥n-a-room">üèóÔ∏è Introducci√≥n a Room y Configuraci√≥n<a class="headerlink" href="#introducci√≥n-a-room" title="Permanent link">¬∂</a></h2>
<p><strong>Room</strong> es una capa de abstracci√≥n sobre <strong>SQLite</strong>, el motor de base de datos relacional que viene integrado en Android. Room nos permite trabajar con objetos de Kotlin en lugar de escribir SQL puro de forma manual para cada operaci√≥n, proporcionando seguridad en tiempo de compilaci√≥n.</p>
<p>Documentaci√≥n sobre persistencia a datos dentro del m√≥dulo:</p>
<ul>
<li>‚≠ê <a href="../../04/4.1-room.html">4.1. Persistencia de datos con Room</a></li>
<li><a href="https://developer.android.com/training/data-storage/room?hl=es-419">Documentaci√≥n Oficial de Room</a></li>
</ul>
<div class="admonition video">
<p class="admonition-title">Video</p>
<div class="grid">
<p><iframe width="560" height="315" src="https://www.youtube.com/embed/FK06jz_dg3E" title="Bases de datos con Room | Persistencia de datos en Android con Kotlin y Jetpack Compose" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe></p>
<p><iframe width="560" height="315" src="https://www.youtube.com/embed/vSKzvA7bW6o" title="ROOM + HILT - üóÑÔ∏è Base de datos en Android - üë®‚Äçüíª Curso ANDROID desde CERO 2024 [#9]" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe></p>
</div>
</div>
<h3 id="por-que-room">¬øPor qu√© Room?<a class="headerlink" href="#por-que-room" title="Permanent link">¬∂</a></h3>
<ol>
<li><strong>Validaci√≥n en compilaci√≥n</strong>: Si escribes mal una consulta SQL, Room te avisar√° antes de ejecutar la app.</li>
<li><strong>Mapeo de Objetos (ORM)</strong>: Convierte autom√°ticamente filas de la base de datos en objetos de c√≥digo.</li>
<li><strong>Soporte para Flow</strong>: Permite observar cambios en la base de datos en tiempo real.</li>
</ol>
<h3 id="configuracion-de-dependencias">Configuraci√≥n de Dependencias<a class="headerlink" href="#configuracion-de-dependencias" title="Permanent link">¬∂</a></h3>
<p>Para usar Room con las mejores pr√°cticas actuales, utilizaremos <strong>KSP (Kotlin Symbol Processing)</strong> en lugar del antiguo KAPT, lo que acelera significativamente la compilaci√≥n.</p>
<p><u>Ubicaci√≥n</u>: <code>gradle/libs.versions.toml</code>
</p><div class="language-toml highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="k">[versions]</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="n">room</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"2.6.1"</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="n">ksp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"2.1.10-1.0.29"</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="k">[libraries]</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="n">androidx-room-runtime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">"androidx.room"</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">"room-runtime"</span><span class="p">,</span><span class="w"> </span><span class="n">version</span><span class="p">.</span><span class="n">ref</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">"room"</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="n">androidx-room-ktx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">"androidx.room"</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">"room-ktx"</span><span class="p">,</span><span class="w"> </span><span class="n">version</span><span class="p">.</span><span class="n">ref</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">"room"</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="n">androidx-room-compiler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">"androidx.room"</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">"room-compiler"</span><span class="p">,</span><span class="w"> </span><span class="n">version</span><span class="p">.</span><span class="n">ref</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">"room"</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="k">[plugins]</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="n">ksp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">"com.google.devtools.ksp"</span><span class="p">,</span><span class="w"> </span><span class="n">version</span><span class="p">.</span><span class="n">ref</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">"ksp"</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="n">room</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">"androidx.room"</span><span class="p">,</span><span class="w"> </span><span class="n">version</span><span class="p">.</span><span class="n">ref</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">"room"</span><span class="w"> </span><span class="p">}</span>
</span></code></pre></div><p></p>
<p><u>Ubicaci√≥n</u>: <code>app/build.gradle.kts</code>
</p><div class="language-kotlin highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">plugins</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">    </span><span class="n">alias</span><span class="p">(</span><span class="n">libs</span><span class="p">.</span><span class="na">plugins</span><span class="p">.</span><span class="na">ksp</span><span class="p">)</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span><span class="n">alias</span><span class="p">(</span><span class="n">libs</span><span class="p">.</span><span class="na">plugins</span><span class="p">.</span><span class="na">room</span><span class="p">)</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="p">}</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="n">dependencies</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">    </span><span class="n">implementation</span><span class="p">(</span><span class="n">libs</span><span class="p">.</span><span class="na">androidx</span><span class="p">.</span><span class="na">room</span><span class="p">.</span><span class="na">runtime</span><span class="p">)</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">    </span><span class="n">implementation</span><span class="p">(</span><span class="n">libs</span><span class="p">.</span><span class="na">androidx</span><span class="p">.</span><span class="na">room</span><span class="p">.</span><span class="na">ktx</span><span class="p">)</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">    </span><span class="n">ksp</span><span class="p">(</span><span class="n">libs</span><span class="p">.</span><span class="na">androidx</span><span class="p">.</span><span class="na">room</span><span class="p">.</span><span class="na">compiler</span><span class="p">)</span><span class="w"> </span><span class="c1">// Compilador de Room mediante KSP</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="p">}</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="n">room</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">    </span><span class="n">schemaDirectory</span><span class="p">(</span><span class="s">"</span><span class="si">$</span><span class="n">projectDir</span><span class="s">/schemas"</span><span class="p">)</span><span class="w"> </span><span class="c1">// Directorio para exportar el esquema (opcional)</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="p">}</span>
</span></code></pre></div><p></p>
<hr>
<h2 id="entitys-y-daos">üèóÔ∏è El Coraz√≥n de Room: Entitys y DAOs<a class="headerlink" href="#entitys-y-daos" title="Permanent link">¬∂</a></h2>
<p>La persistencia en Room se basa en tres pilares fundamentales: <strong>Entities</strong>, <strong>DAOs</strong> y la <strong>Database</strong>.</p>
<h3 id="arquitectura-de-room">Arquitectura de Room<a class="headerlink" href="#arquitectura-de-room" title="Permanent link">¬∂</a></h3>
<p>Para entender c√≥mo interact√∫an estos componentes, podemos visualizarlo de la siguiente manera:</p>
<pre class="mermaid"><code>graph TD
    subgraph "Capa de Persistencia"
        DB[AppDatabase] -- contiene --&gt; DAO[DAOs]
        DAO -- gestiona --&gt; ENT[Entities]
        ENT -- mapea a --&gt; SQL[(SQLite Table)]
        DAO -- realiza consultas SQL a --&gt; SQL
    end

    Repo[Repository] -- invoca --&gt; DAO
    VM[ViewModel] -- observa Flow de --&gt; DAO</code></pre>
<h3 id="1-entities-entidades">1. Entities (Entidades)<a class="headerlink" href="#1-entities-entidades" title="Permanent link">¬∂</a></h3>
<p>Son clases de datos que representan las <strong>tablas</strong> de nuestra base de datos. Cada propiedad de la clase es una columna en la tabla.</p>
<ul>
<li><strong>@PrimaryKey</strong>: Identificador √∫nico de la fila.</li>
<li><strong>@ForeignKey</strong>: Define relaciones entre tablas (ej: una nota pertenece a un usuario).</li>
<li><strong>@Index</strong>: Optimiza la velocidad de las b√∫squedas en columnas espec√≠ficas.</li>
</ul>
<h4 id="ejemplo-libraryentity">Ejemplo: LibraryEntity<a class="headerlink" href="#ejemplo-libraryentity" title="Permanent link">¬∂</a></h4>
<p>Esta entidad gestiona la relaci√≥n entre un usuario y sus juegos (favoritos, wishlist).</p>
<p><u>Ubicaci√≥n</u>: <code>data/local/entities/LibraryEntity.kt</code>
</p><div class="language-kotlin highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nd">@Entity</span><span class="p">(</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">    </span><span class="n">tableName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"library"</span><span class="p">,</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span><span class="n">primaryKeys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s">"username"</span><span class="p">,</span><span class="w"> </span><span class="s">"gameId"</span><span class="o">]</span><span class="p">,</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">    </span><span class="n">foreignKeys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">        </span><span class="n">ForeignKey</span><span class="p">(</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">            </span><span class="n">entity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UserEntity</span><span class="o">::</span><span class="n">class</span><span class="p">,</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">            </span><span class="n">parentColumns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s">"username"</span><span class="o">]</span><span class="p">,</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">            </span><span class="n">childColumns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s">"username"</span><span class="o">]</span><span class="p">,</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">            </span><span class="n">onDelete</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ForeignKey</span><span class="p">.</span><span class="na">CASCADE</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">        </span><span class="p">)</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">    </span><span class="o">]</span><span class="p">,</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">    </span><span class="n">indices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">Index</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s">"username"</span><span class="o">]</span><span class="p">)</span><span class="o">]</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="p">)</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">LibraryEntity</span><span class="p">(</span>
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">username</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">gameId</span><span class="p">:</span><span class="w"> </span><span class="kt">Int</span><span class="p">,</span>
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">addedDate</span><span class="p">:</span><span class="w"> </span><span class="kt">Long</span><span class="p">,</span>
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">status</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="c1">// FAVORITE, WISHLIST, OWNED</span>
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="p">)</span>
</span></code></pre></div><p></p>
<h3 id="2-daos-data-access-objects">2. DAOs (Data Access Objects)<a class="headerlink" href="#2-daos-data-access-objects" title="Permanent link">¬∂</a></h3>
<p>Son interfaces que definen <strong>c√≥mo</strong> accedemos a los datos. Aqu√≠ es donde escribimos nuestras consultas:
*   <code>@Query</code>: Consultas de lectura personalizadas.
*   <code>@Insert</code>, <code>@Update</code>, <code>@Delete</code>: Operaciones b√°sicas de escritura.</p>
<h4 id="ejemplo-librarydao">Ejemplo: LibraryDao<a class="headerlink" href="#ejemplo-librarydao" title="Permanent link">¬∂</a></h4>
<p>Define las operaciones para gestionar la biblioteca del usuario.</p>
<p><u>Ubicaci√≥n</u>: <code>data/local/dao/LibraryDao.kt</code>
</p><div class="language-kotlin highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nd">@Dao</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="kd">interface</span><span class="w"> </span><span class="nc">LibraryDao</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">    </span><span class="nd">@Query</span><span class="p">(</span><span class="s">"SELECT * FROM library WHERE username = :username"</span><span class="p">)</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">getLibraryForUser</span><span class="p">(</span><span class="n">username</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">):</span><span class="w"> </span><span class="n">Flow</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">LibraryEntity</span><span class="o">&gt;&gt;</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">    </span><span class="nd">@Query</span><span class="p">(</span><span class="s">"SELECT * FROM library WHERE username = :username AND status = :status"</span><span class="p">)</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">getGamesByStatus</span><span class="p">(</span><span class="n">username</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">):</span><span class="w"> </span><span class="n">Flow</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">LibraryEntity</span><span class="o">&gt;&gt;</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">    </span><span class="nd">@Insert</span><span class="p">(</span><span class="n">onConflict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OnConflictStrategy</span><span class="p">.</span><span class="na">REPLACE</span><span class="p">)</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">    </span><span class="kd">suspend</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">insertLibraryEntry</span><span class="p">(</span><span class="n">entry</span><span class="p">:</span><span class="w"> </span><span class="n">LibraryEntity</span><span class="p">)</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">    </span><span class="nd">@Query</span><span class="p">(</span><span class="s">"DELETE FROM library WHERE username = :username AND gameId = :gameId"</span><span class="p">)</span>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="w">    </span><span class="kd">suspend</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">deleteLibraryEntry</span><span class="p">(</span><span class="n">username</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="n">gameId</span><span class="p">:</span><span class="w"> </span><span class="kt">Int</span><span class="p">)</span>
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="p">}</span>
</span></code></pre></div><p></p>
<h3 id="3-la-base-de-datos-appdatabase">3. La Base de Datos (AppDatabase)<a class="headerlink" href="#3-la-base-de-datos-appdatabase" title="Permanent link">¬∂</a></h3>
<p>Es el punto de uni√≥n de todas las entidades y DAOs.</p>
<p><u>Ubicaci√≥n</u>: <code>data/local/AppDatabase.kt</code>
</p><div class="language-kotlin highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nd">@Database</span><span class="p">(</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">    </span><span class="n">entities</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">        </span><span class="n">UserEntity</span><span class="o">::</span><span class="n">class</span><span class="p">,</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">        </span><span class="n">LibraryEntity</span><span class="o">::</span><span class="n">class</span><span class="p">,</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">        </span><span class="n">SearchHistoryEntity</span><span class="o">::</span><span class="n">class</span><span class="p">,</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">        </span><span class="n">RecentGameEntity</span><span class="o">::</span><span class="n">class</span><span class="p">,</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">        </span><span class="n">GameNoteEntity</span><span class="o">::</span><span class="kd">class</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">    </span><span class="err">],</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">    </span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">    </span><span class="n">exportSchema</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="p">)</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="kd">abstract</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">AppDatabase</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">RoomDatabase</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="w">    </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">userDao</span><span class="p">():</span><span class="w"> </span><span class="n">UserDao</span>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="w">    </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">libraryDao</span><span class="p">():</span><span class="w"> </span><span class="n">LibraryDao</span>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="w">    </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">searchHistoryDao</span><span class="p">():</span><span class="w"> </span><span class="n">SearchHistoryDao</span>
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="w">    </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">recentGameDao</span><span class="p">():</span><span class="w"> </span><span class="n">RecentGameDao</span>
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="w">    </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">gameNoteDao</span><span class="p">():</span><span class="w"> </span><span class="n">GameNoteDao</span>
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="p">}</span>
</span></code></pre></div><p></p>
<h3 id="diagrama-de-relaciones">Diagrama de Relaciones<a class="headerlink" href="#diagrama-de-relaciones" title="Permanent link">¬∂</a></h3>
<p>A continuaci√≥n, vemos c√≥mo se relacionan nuestras entidades en el sistema:</p>
<pre class="mermaid"><code>classDiagram
    %% Capa de Datos: Entidades de Room
    class UserEntity {
        +String username [PK]
        +String name
        +String email
        +String avatarUrl
        +String bio
    }

    class LibraryEntity {
        +String username [PK/FK]
        +Int gameId [PK]
        +Long addedDate
        +String status
    }

    class GameNoteEntity {
        +Int gameId [PK]
        +String username [FK]
        +String note
        +String progressStatus
        +Long lastUpdated
    }

    class RecentGameEntity {
        +Int id [PK]
        +String username [FK]
        +Int gameId
        +Long timestamp
    }

    class SearchHistoryEntity {
        +Int id [PK]
        +String username [FK]
        +String query
        +Long timestamp
    }

    %% Capa de Dominio: Modelo de Referencia
    class Game {
        +Int id
        +String title
        +String description
        +Double price
        +GameCategory category
    }

    %% Relaciones
    UserEntity "1" --o "0..*" LibraryEntity : posee
    UserEntity "1" --o "0..*" GameNoteEntity : escribe
    UserEntity "1" --o "0..*" RecentGameEntity : visualiza
    UserEntity "1" --o "0..*" SearchHistoryEntity : busca

    LibraryEntity ..&gt; Game : referencia ID
    GameNoteEntity ..&gt; Game : referencia ID
    RecentGameEntity ..&gt; Game : referencia ID

    %% Notas sobre Enums (Referencia Conceptual)
    note for LibraryEntity "Status: FAVORITE, WISHLIST, OWNED"
    note for GameNoteEntity "Progress: PENDING, PLAYING, COMPLETED, ABANDONED"</code></pre>
<hr>
<h2 id="relaciones-entidades">üîó Relacionando Datos: Foreign Keys<a class="headerlink" href="#relaciones-entidades" title="Permanent link">¬∂</a></h2>
<p>En una base de datos relacional, es vital que los datos est√©n conectados. Room utiliza las <strong>Foreign Keys</strong> (Claves For√°neas) para asegurar la <strong>integridad referencial</strong>.</p>
<h3 id="que-es-una-clave-foranea">¬øQu√© es una Clave For√°nea?<a class="headerlink" href="#que-es-una-clave-foranea" title="Permanent link">¬∂</a></h3>
<p>Es una columna que establece una conexi√≥n entre dos tablas. Por ejemplo, en nuestra tabla <code>library</code>, la columna <code>username</code> es una clave for√°nea que apunta a la tabla <code>users</code>.</p>
<h3 id="como-implementar-una-relacion-en-room">C√≥mo implementar una relaci√≥n en Room<a class="headerlink" href="#como-implementar-una-relacion-en-room" title="Permanent link">¬∂</a></h3>
<p>Para relacionar dos entidades, usamos el par√°metro <code>foreignKeys</code> dentro de la anotaci√≥n <code>@Entity</code>.</p>
<h4 id="ejemplo-relacion-usuario-biblioteca">Ejemplo: Relaci√≥n Usuario -&gt; Biblioteca<a class="headerlink" href="#ejemplo-relacion-usuario-biblioteca" title="Permanent link">¬∂</a></h4>
<p>Queremos que un registro de la biblioteca solo pueda existir si el usuario asociado existe en la tabla de usuarios.</p>
<div class="language-kotlin highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nd">@Entity</span><span class="p">(</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">    </span><span class="n">tableName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"library"</span><span class="p">,</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">    </span><span class="n">primaryKeys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s">"username"</span><span class="p">,</span><span class="w"> </span><span class="s">"gameId"</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="c1">// Clave primaria compuesta</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">    </span><span class="n">foreignKeys</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">        </span><span class="n">ForeignKey</span><span class="p">(</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">            </span><span class="n">entity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UserEntity</span><span class="o">::</span><span class="n">class</span><span class="p">,</span><span class="w">      </span><span class="c1">// Tabla padre</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">            </span><span class="n">parentColumns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s">"username"</span><span class="o">]</span><span class="p">,</span><span class="w">    </span><span class="c1">// Columna en la tabla padre</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">            </span><span class="n">childColumns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s">"username"</span><span class="o">]</span><span class="p">,</span><span class="w">     </span><span class="c1">// Columna en esta tabla (hija)</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">            </span><span class="n">onDelete</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ForeignKey</span><span class="p">.</span><span class="na">CASCADE</span><span class="w">    </span><span class="c1">// Si se borra el usuario, se borra su biblioteca</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">        </span><span class="p">)</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="w">    </span><span class="o">]</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="p">)</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">LibraryEntity</span><span class="p">(</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">username</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">gameId</span><span class="p">:</span><span class="w"> </span><span class="kt">Int</span><span class="p">,</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">addedDate</span><span class="p">:</span><span class="w"> </span><span class="kt">Long</span><span class="p">,</span>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">status</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span>
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a><span class="p">)</span>
</span></code></pre></div>
<h3 id="tipos-de-relaciones-comunes">Tipos de Relaciones comunes:<a class="headerlink" href="#tipos-de-relaciones-comunes" title="Permanent link">¬∂</a></h3>
<ol>
<li><strong>Uno a Muchos (1:N)</strong>: Un usuario tiene muchos juegos en su biblioteca. Se implementa poniendo el ID del "padre" (<code>username</code>) como clave for√°nea en la tabla "hija" (<code>library</code>).</li>
<li><strong>Muchos a Muchos (N:M)</strong>: Muchos usuarios pueden tener muchos juegos. Room lo maneja mediante una <strong>tabla asociativa</strong> (como nuestra tabla <code>library</code>, que asocia un <code>username</code> con un <code>gameId</code>).</li>
</ol>
<h3 id="integridad-referencial-ondelete-cascade">Integridad Referencial: <code>onDelete = CASCADE</code><a class="headerlink" href="#integridad-referencial-ondelete-cascade" title="Permanent link">¬∂</a></h3>
<p>Esta es una funcionalidad muy potente. Al configurar <code>CASCADE</code>, le decimos a SQLite: <em>"Si eliminas este usuario de la base de datos, elimina autom√°ticamente todos sus juegos favoritos, notas y b√∫squedas relacionadas"</em>. Esto evita que queden "datos hu√©rfanos" en nuestra base de datos.</p>
<hr>
<h2 id="mapeo-de-datos">üõ°Ô∏è Mapeo de Datos y Conversores<a class="headerlink" href="#mapeo-de-datos" title="Permanent link">¬∂</a></h2>
<p>Podr√≠as preguntarte: <em>¬øPor qu√© no usamos las mismas clases de Room en toda la app?</em> La respuesta es por <strong>Arquitectura Limpia (Clean Architecture)</strong>.</p>
<h3 id="1-typeconverters-los-traductores-de-sqlite">1. TypeConverters: Los traductores de SQLite<a class="headerlink" href="#1-typeconverters-los-traductores-de-sqlite" title="Permanent link">¬∂</a></h3>
<p>Room solo entiende tipos b√°sicos (String, Int, Long). Para guardar tipos complejos como Enums o Fechas, necesitamos conversores.</p>
<p><u>Ubicaci√≥n</u>: <code>data/local/RoomConverters.kt</code> (Propuesta did√°ctica)
</p><div class="language-kotlin highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kd">class</span><span class="w"> </span><span class="nc">RoomConverters</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">    </span><span class="nd">@TypeConverter</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">fromLibraryStatus</span><span class="p">(</span><span class="n">status</span><span class="p">:</span><span class="w"> </span><span class="n">LibraryStatus</span><span class="p">):</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">status</span><span class="p">.</span><span class="na">name</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">    </span><span class="nd">@TypeConverter</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">toLibraryStatus</span><span class="p">(</span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">):</span><span class="w"> </span><span class="n">LibraryStatus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LibraryStatus</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="p">}</span>
</span></code></pre></div>
<em>Nota: Debes registrar estos conversores en tu clase <code>AppDatabase</code> usando la anotaci√≥n <code>@TypeConverters(RoomConverters::class)</code>.</em><p></p>
<h3 id="2-mappers-protegiendo-el-dominio">2. Mappers: Protegiendo el Dominio<a class="headerlink" href="#2-mappers-protegiendo-el-dominio" title="Permanent link">¬∂</a></h3>
<p>El Mapper traduce de la <strong>Capa de Datos</strong> (<code>Entity</code>) a la <strong>Capa de Dominio</strong> (<code>Game</code>).</p>
<p>¬øPor qu√© usarlos?
1.  <strong>Desacoplamiento</strong>: Si usamos <code>@Entity</code> en la UI, estamos "contaminando" la vista con detalles de la base de datos.
2.  <strong>Transformaci√≥n de Tipos</strong>: Traduce de <code>"FAVORITE"</code> (String en BD) a <code>LibraryStatus.FAVORITE</code> (Enum en c√≥digo).
3.  <strong>Seguridad</strong>: Asegura que solo los datos necesarios lleguen a la UI.</p>
<h3 id="typeconverters-vs-mappers">TypeConverters vs Mappers<a class="headerlink" href="#typeconverters-vs-mappers" title="Permanent link">¬∂</a></h3>
<ul>
<li><strong>TypeConverter</strong>: Se encarga de que Room sepa c√≥mo guardar un tipo complejo en el disco (ej: Enum -&gt; String). Opera a nivel de persistencia.</li>
<li><strong>Mapper</strong>: Se encarga de convertir modelos entre capas (ej: Entity -&gt; Domain Model). Opera a nivel de arquitectura.</li>
</ul>
<h3 id="diagrama-de-flujo-de-datos">Diagrama de Flujo de Datos<a class="headerlink" href="#diagrama-de-flujo-de-datos" title="Permanent link">¬∂</a></h3>
<p>Para visualizar c√≥mo interact√∫an todos estos componentes, observa el siguiente diagrama de secuencia. Muestra el camino que recorre un dato desde que el usuario interact√∫a con la pantalla hasta que se guarda o recupera de la base de datos:</p>
<pre class="mermaid"><code>sequenceDiagram
    participant UI as UI (Compose Screen)
    participant VM as ViewModel
    participant UC as UseCase
    participant Repo as Repository
    participant Mapper as Mapper
    participant Room as Room (DAO)
    participant TC as TypeConverter
    participant DB as SQLite (Disco)

    Note over UI, DB: Flujo de Recuperaci√≥n de Datos (Observaci√≥n)

    UI-&gt;&gt;VM: Observa StateFlow
    VM-&gt;&gt;UC: Solicita Flow de datos
    UC-&gt;&gt;Repo: Solicita Resource&lt;Flow&gt;
    Repo-&gt;&gt;Room: Consulta al DAO
    Room-&gt;&gt;DB: SELECT * FROM tabla
    DB--&gt;&gt;TC: Devuelve tipos b√°sicos (String, Int)
    TC--&gt;&gt;Room: Convierte a tipos complejos (Enums)
    Room--&gt;&gt;Repo: Devuelve Entity (ej: LibraryEntity)
    Repo-&gt;&gt;Mapper: Convierte Entity a Domain Model
    Mapper--&gt;&gt;Repo: Devuelve Domain Model (ej: Game)
    Repo--&gt;&gt;UC: Devuelve Resource.Success(Game)
    UC--&gt;&gt;VM: Emite nuevo estado
    VM--&gt;&gt;UI: Actualiza la pantalla autom√°ticamente</code></pre>
<hr>
<h2 id="arquitectura-h√≠brida">‚öôÔ∏è Arquitectura H√≠brida y Reactividad<a class="headerlink" href="#arquitectura-h√≠brida" title="Permanent link">¬∂</a></h2>
<p>Nuestra aplicaci√≥n ahora utiliza un <strong>Repositorio H√≠brido</strong> (<code>MockGamesRepositoryImpl</code>). Este act√∫a como un orquestador que combina dos fuentes de datos:
1.  <strong>MockDataSource</strong>: Para la informaci√≥n est√°tica de los juegos (t√≠tulo, imagen, etc.).
2.  <strong>AppDatabase (Room)</strong>: Para la informaci√≥n din√°mica del usuario (si es favorito, sus notas, etc.).</p>
<h4 id="implementacion-en-el-repositorio">Implementaci√≥n en el Repositorio<a class="headerlink" href="#implementacion-en-el-repositorio" title="Permanent link">¬∂</a></h4>
<p>Observa c√≥mo el repositorio mezcla los datos de Room con los del Mock:</p>
<p><u>Ubicaci√≥n</u>: <code>data/repository/MockGamesRepositoryImpl.kt</code>
</p><div class="language-kotlin highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">getFavoriteGames</span><span class="p">():</span><span class="w"> </span><span class="n">Flow</span><span class="o">&lt;</span><span class="n">Resource</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Game</span><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">flow</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">    </span><span class="n">emit</span><span class="p">(</span><span class="n">Resource</span><span class="p">.</span><span class="na">Loading</span><span class="p">)</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getCurrentUser</span><span class="p">()</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">    </span><span class="c1">// 1. Escuchamos cambios en Room (DAO)</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">    </span><span class="n">db</span><span class="p">.</span><span class="na">libraryDao</span><span class="p">().</span><span class="na">getGamesByStatus</span><span class="p">(</span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="s">"FAVORITE"</span><span class="p">).</span><span class="na">collect</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">entities</span><span class="w"> </span><span class="o">-&gt;</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">        </span><span class="c1">// 2. Cruzamos los IDs de Room con los datos del MockDataSource</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">games</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">entities</span><span class="p">.</span><span class="na">mapNotNull</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">entity</span><span class="w"> </span><span class="o">-&gt;</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w">            </span><span class="n">dataSource</span><span class="p">.</span><span class="na">games</span><span class="p">.</span><span class="na">find</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">it</span><span class="p">.</span><span class="na">id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">entity</span><span class="p">.</span><span class="na">gameId</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="w">        </span><span class="c1">// 3. Emitimos el resultado final al UseCase</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="w">        </span><span class="n">emit</span><span class="p">(</span><span class="n">Resource</span><span class="p">.</span><span class="na">Success</span><span class="p">(</span><span class="n">games</span><span class="p">))</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="p">}</span>
</span></code></pre></div><p></p>
<h3 id="integracion-en-el-viewmodel">Integraci√≥n en el ViewModel<a class="headerlink" href="#integracion-en-el-viewmodel" title="Permanent link">¬∂</a></h3>
<p>El ViewModel ya no gestiona listas est√°ticas, sino que observa los flujos de datos que vienen de la base de datos.</p>
<p><u>Ubicaci√≥n</u>: <code>presentation/viewmodel/DetailViewModel.kt</code>
</p><div class="language-kotlin highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="kd">class</span><span class="w"> </span><span class="nc">DetailViewModel</span><span class="p">(</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">useCases</span><span class="p">:</span><span class="w"> </span><span class="n">GameUseCases</span><span class="p">,</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">gameId</span><span class="p">:</span><span class="w"> </span><span class="kt">Int</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ViewModel</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">_uiState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MutableStateFlow</span><span class="p">(</span><span class="n">DetailUiState</span><span class="p">())</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">uiState</span><span class="p">:</span><span class="w"> </span><span class="n">StateFlow</span><span class="o">&lt;</span><span class="n">DetailUiState</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_uiState</span><span class="p">.</span><span class="na">asStateFlow</span><span class="p">()</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="w">    </span><span class="k">init</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="w">        </span><span class="n">loadGame</span><span class="p">()</span>
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="w">        </span><span class="n">checkIfFavorite</span><span class="p">()</span><span class="w"> </span><span class="c1">// Comprueba estado inicial</span>
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="w">        </span><span class="n">loadNote</span><span class="p">()</span><span class="w">        </span><span class="c1">// Carga nota de Room</span>
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a>
</span><span id="__span-8-15"><a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a><span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">toggleFavorite</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-16"><a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a><span class="w">        </span><span class="n">viewModelScope</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-17"><a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a><span class="w">            </span><span class="c1">// Actualiza Room y la UI reaccionar√° sola gracias al Flow</span>
</span><span id="__span-8-18"><a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a><span class="w">            </span><span class="n">useCases</span><span class="p">.</span><span class="na">toggleFavorite</span><span class="p">(</span><span class="n">gameId</span><span class="p">)</span>
</span><span id="__span-8-19"><a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a><span class="w">            </span><span class="n">checkIfFavorite</span><span class="p">()</span>
</span><span id="__span-8-20"><a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-8-21"><a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-8-22"><a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a><span class="p">}</span>
</span></code></pre></div><p></p>
<h3 id="el-poder-de-flow-en-room">El poder de Flow en Room<a class="headerlink" href="#el-poder-de-flow-en-room" title="Permanent link">¬∂</a></h3>
<p>Al definir los m√©todos del DAO devolviendo <code>Flow&lt;List&lt;T&gt;&gt;</code>, Room implementa autom√°ticamente la <strong>reactividad</strong>. Si el usuario marca un juego como favorito, Room detecta el cambio en el disco y emite autom√°ticamente la nueva lista. La UI se actualiza sola sin que tengamos que pedir los datos de nuevo.</p>
<hr>
<h2 id="motor-app">üöÄ El Motor de la App: MyGameStoreApp<a class="headerlink" href="#motor-app" title="Permanent link">¬∂</a></h2>
<p>En Android, la clase <code>Application</code> es el punto de entrada global de la aplicaci√≥n. Se crea una sola vez cuando se lanza el proceso de la app y vive hasta que este finaliza.</p>
<p><u>Ubicaci√≥n</u>: <code>MyGameStoreApp.kt</code>
</p><div class="language-kotlin highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="kd">class</span><span class="w"> </span><span class="nc">MyGameStoreApp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Application</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">    </span><span class="kd">companion</span><span class="w"> </span><span class="kd">object</span><span class="w"> </span><span class="err">{</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">        </span><span class="kd">lateinit</span><span class="w"> </span><span class="kd">var</span><span class="w"> </span><span class="nv">database</span><span class="p">:</span><span class="w"> </span><span class="n">AppDatabase</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">            </span><span class="n">private</span><span class="w"> </span><span class="k">set</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="w">    </span><span class="kd">override</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">onCreate</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="w">        </span><span class="k">super</span><span class="p">.</span><span class="na">onCreate</span><span class="p">()</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">        </span><span class="c1">// Inicializaci√≥n de la base de datos como Singleton</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="w">        </span><span class="n">database</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Room</span><span class="p">.</span><span class="na">databaseBuilder</span><span class="p">(</span>
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="w">            </span><span class="n">applicationContext</span><span class="p">,</span>
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="w">            </span><span class="n">AppDatabase</span><span class="o">::</span><span class="n">class</span><span class="p">.</span><span class="na">java</span><span class="p">,</span>
</span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="w">            </span><span class="s">"mygamestore_db"</span>
</span><span id="__span-9-14"><a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="w">        </span><span class="p">).</span><span class="na">build</span><span class="p">()</span>
</span><span id="__span-9-15"><a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-9-16"><a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a><span class="p">}</span>
</span></code></pre></div><p></p>
<h3 id="por-que-es-importante">¬øPor qu√© es importante?<a class="headerlink" href="#por-que-es-importante" title="Permanent link">¬∂</a></h3>
<ol>
<li><strong>Patr√≥n Singleton</strong>: Crear una instancia de base de datos es una operaci√≥n "pesada". Al hacerlo en la clase <code>Application</code>, aseguramos que solo exista <strong>una instancia</strong> en toda la vida de la app, evitando fugas de memoria y bloqueos de base de datos.</li>
<li><strong>Punto de Acceso Global</strong>: Al estar en un <code>companion object</code>, cualquier parte de la app (como los repositorios) puede acceder a la base de datos de forma segura.</li>
<li><strong>Configuraci√≥n √önica</strong>: Es el lugar ideal para configurar migraciones de base de datos o inicializar datos por defecto.</li>
</ol>
<hr>
<h3 id="conclusion">üí° Conclusi√≥n<a class="headerlink" href="#conclusion" title="Permanent link">¬∂</a></h3>
<p>Con Room, hemos dado el paso definitivo hacia una aplicaci√≥n profesional. Ahora los datos del usuario son persistentes, la arquitectura es robusta gracias a los Mappers y la UI es reactiva gracias a Flow. ¬°MyGameStore ya tiene memoria!</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Volver al principio
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      2025-2026 Jes√∫s Garc√≠a - Licencia CC BY-NC-SA
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="mailto:&lt;jssgarcia.docente@gmail.com&gt;" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 12.13c-.15.01-.29.06-.39.17l-1 1 2.05 2 1-1c.22-.21.22-.56 0-.77l-1.24-1.23a.56.56 0 0 0-.38-.17m-2 1.75L13 19.94V22h2.06l6.06-6.07M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h7v-.89l8.24-8.22c.47-.49 1.12-.76 1.8-.76.34 0 .68.06 1 .19V6c0-1.12-.92-2-2.04-2m0 4-8 5-8-5V6l8 5 8-5"></path></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["header.autohide", "content.tabs.link", "content.code.copy", "content.code.select", "navigation.top", "content.code.annotate", "navigation.path", "content.tooltips"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>